Grigory Kislin [2:49 AM]
joined #hw9.

Grigory Kislin [2:51 AM]
set the channel topic: https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson09.md

Grigory Kislin [2:53 AM]
Привет! Наконец делаем настоящую авторизацию, ее тестирование и отрисовку таблиц по AJAX.
Welcome: https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson09.md (edited)

Tanya [2:54 AM]
joined #hw9 along with 18 others.

Grigory Kislin [11:33 AM]
патчи вчекинил


Gagarina6794 [Yesterday at 1:50 PM]
Всем привет! Меня интересует следующий код в разборе хомворка  @GetMapping(value = "/filter", produces = MediaType.APPLICATION_JSON_VALUE)
   public List<MealWithExceed> getBetween(                  На сколько правильно и безопасно пользоваться аннотацией @GetMapping? Почему не использовали @PostMapping? Ведь в таком случае данные фильтрации попадают в URL что нарушает безопасность запроса.  https://www.komtet.ru/lib/tech/apache/razlichie-mezhdu-metodami-get-i-post
komtet.ru
Различие между методами GET и POST — КОМТЕТ — хостинг
Сравнение двух методов GET и POST используемых для передачи данных и веб-форм.


21 replies
Ma3stro [24 hours ago]
Вопрос в том, должен ли этот метод соблюдать подобную безопасность (edited)


Gagarina6794 [24 hours ago]
Это да, но фильтрацию тоже могут отслеживать поисковики в своих целях по пользователях, я считаю такие данные должны скрываться


Gagarina6794 [24 hours ago]
вот  такую строчку вставляем и что же мы получим в браузере?) http://localhost:8080/topjava/ajax/profile/meals/filter?startDate=&endDate=&startTime=13%3A33&endTime=&_=1535625799662


Gagarina6794 [24 hours ago]
id еды, значит кто-то сможет воспользоваться етими данными


Gagarina6794 [24 hours ago]
ну такое мое мнение)

svis [21 hours ago]
id еды мы при желании можем получить и другими путями

svis [21 hours ago]
являются ли данные о фильтрации, которые сохраняются только в кэше, данными, которые могут содержать личную или государственную тайну - это вопрос скорее философский

svis [21 hours ago]
по крайней мере, в отличии от номера банковского счета или номера паспорта или других подобных данных - насчет секретности данных фильтрации еды по времени поедания никаких законодательных актов нет (edited)


svis [21 hours ago]
у метода POST - свои недостатки и в rfc написано для чего он может применяться (edited)

svis [21 hours ago]
Григорий давал в комментариях к прошлому уроку ссылку на заметку по поводу GET и POST (edited)


svis [21 hours ago]
есть архитекторы, которые POST вообще не используют, но это все-таки думаю перебор. Как впрочем и причисление данных о фильтрации еды к сведениям, которые являются тайной:slightly_smiling_face: (edited)


Gagarina6794 [21 hours ago]
Да, в delete тоже можно данные id посмотреть)

Gagarina6794 [21 hours ago]
но мы как бы догадываемся что это id

svis [21 hours ago]
POST - он обычно медленнее GET что бывает критично. Отсутствие кэширования дополнительно грузит бэкенд.


svis [20 hours ago]
На всякий случай ссылка на rfc2616 https://www.ietf.org/rfc/rfc2616.txt


svis [20 hours ago]
Описание методов, идемпотентность и подобное -  в главе 9 Method Definitions


Gagarina6794 [20 hours ago]
спасибо)


svis [20 hours ago]
welcome:smiley:


Gagarina6794 [20 hours ago]
ну в итоге все мои проблемы безопасности ограничились тем что просто можно узнать что люди фильтруют (бесплатная статистика)  и плюс возможность вручную в адресной строке сделать фильтрацию:grin:


Grigory Kislin [16 hours ago]
чужую еду даже если есть ссылка ты не посмотришь.
только свою по авторизации
те по ссылке злоумышленник узнает, что некто интересовался своей едой с данным фильтром.. не думаю что это секретно:)


Gagarina6794 [15 hours ago]
Да, все тайное стало понятным, спасибо :blush:


sky [Yesterday at 3:42 PM]
В третьем патче (решение пред. урока) в методе enable есть такая строчка
repository.save(user);  // !! need only for JDBC implementation
Это все работает из-за @Access(AccessType.FIELD)  или @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)?
Просто до этого вроде не было манипуляций с данными в бд с помощью сеттеров объектов Entity, все вроде как через репозитории делали. Хочется понять, именно так и нужно делать?


2 replies
Stanislav [22 hours ago]
В хибернейте при persistent состоянии, когда меняешь свойства они автоматом при закрытии транзакции сохраняются



sky [22 hours ago]
да, в конце транзакции все изменения флашатся, как то упустил этот момент, благодарю


Stanislav [Yesterday at 3:49 PM]
HasId какой то неприкаянный. Разве по DDD: DTO, POJO и Value Object это все не доменная модель? Может сделать пакет domain и все туда (model, to и уже в domain Hasid)? (edited)


8 replies
tim [20 hours ago]
Я вообще не понял зачем ввели  HashId и BaseTo?


Stanislav [20 hours ago]
Еще одна абстракция, AbstractBaseEntity относится к Entity, у ДТО тоже есть id. Посмотри где оно используется и представь что HashId бы не было, как бы пришлось доработать 'программу' что бы не потерять тот же функционал.


Ma3stro [19 hours ago]
У нас здесь видимо на всё, что повторяется более 2 раз,  делается абстракция:)

Stanislav [19 hours ago]
Привыкай. Ты залезь под капот спринга, вообще охренеешь :)


Stanislav [19 hours ago]
Даже на собеседованиях очень часто просят абстрагировать задачу. Раньше не понимал, почему столько обсуждений по ООП, что там понимать, 4 принципа и все, тьфу, легкотня, а ты попробуй взять задачу и разложить ее на абстракции. Да та же модель из выпускного, посмотри сколько обсуждений, а так разобраться, что там обсуждать 5-6 энтити, а в реальной работе их сотни-тысячи.


Grigory Kislin [15 hours ago]
dto и model/dimain делают не то что в разных пакетах, а иногда даже в разных модулях


Stanislav [15 hours ago]
@Grigory Kislin оно может и так, но согласись что HashId не на свое месте (не должно быть его в корне проекта). Вот я и рассуждаю, куда его.


Grigory Kislin [12 hours ago]
да, для некоторых общих классов тяжело пакет найти