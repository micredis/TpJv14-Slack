Grigory Kislin [1:07 AM]
joined #graduation along with Prodigy.

Grigory Kislin [1:14 AM]
Выпускной проект https://github.com/JavaWebinar/topjava/blob/doc/doc/graduation.md пишется постепенно: после прохождения занятия можно добавить его функционал в выпускной проект. Нарпимер совсем не обязательно делать REST контроллеры до того, пока мы их не прошли на 7м занятии. (edited)
Здесь можно обсуждать все вопросы по реализации.

dimlo [1:23 AM]
joined #graduation along with 17 others.

alexey [2:15 PM]
Ку. Народ кто сколько сущностей делал?  Сделал  пока 5 (юзеры,роли,рестораны,блюдо,голоса), вот сомневаюсь, может голоса лучше в ресторане хранить!?:exploding_head:

Join_Selectovich [2:30 PM]
можт отдельную вывести сущность - голосование

shtramak [2:41 PM]
Ну таблица бы голоса (id, user_id,Restaurant_id, datetime) нормально бы сюда вписалась. Но не знаю, как бы на производительности сказался бы уникальный индекс по трем полям (опять же нас интересует уникальность по дате, а не по datetime, что заставляет задуматься)
Плюс такая таблица вроде по 3й форме, но не более

Ma3stro [4:13 PM]
В рекомендациях есть пунктик об истории голосований, поэтому лучше сущность всё же сделать отдельную

Макс Куркудюк [9:24 AM]
Доброго дня)


Макс Куркудюк [Jul 22nd at 9:26 AM]
Підкажіть, випускний проект робити у новому репозиторії з нуля, зробити гілку від даного проекту чи якось ще інакше?


2 replies
Yevhen Maksymovych [3 days ago]
в новому. це цілком самостійний проект, який ти розробляєш з нуля. можеш використовувати якісь асети з topjava, якщо захочеш, але це опціонально
 


Макс Куркудюк [3 days ago]
Дякую, Євгене.


sky [8:09 PM]
в плане курса, между 6 и 7 занятиями есть такая строчка 
Большое ДЗ + выпускной проект + подтягиваем "хвосты".
Т.е. к 7ому занятию надо будет выполнить выпускной проект (большую чать)?

Grigory Kislin [8:18 PM]
выпускной нужен к 04.10  если есть проверка


sky [8:09 PM]
в плане курса, между 6 и 7 занятиями есть такая строчка 
Большое ДЗ + выпускной проект + подтягиваем "хвосты".
Т.е. к 7ому занятию надо будет выполнить выпускной проект (большую чать)?

Grigory Kislin [8:18 PM]
выпускной нужен к 04.10  если есть проверка


Макс Куркудюк [Yesterday at 5:40 PM]
without frontend (без зовнішнього інтерфейсу) - це розробити проект без можливості відкрити його у браузері (без webapp, jsp...)?


64 replies
Kirilo [21 hours ago]
http://localhost:8080/restaurants (edited)


Макс Куркудюк [21 hours ago]
Отже з можливістю відкрити його у браузері.
Тоді що означає without frontend? (edited)


Maksim K [20 hours ago]
Я так понимаю, что без фронтенда это значит только бекэнд. То есть в браузере ничего не открывается. Никаких jsp и тому подобного. Только контроллер, сервис и репозиторий


Макс Куркудюк [20 hours ago]
...і тести.
Ну, я одразу теж так подумав, але краще перепитати)


Prodigy [16 hours ago]
а жаль... с фронтендом было бы веселее)) фронтенд это отдельная история)


Prodigy [16 hours ago]
кстати, непонятно почему без фронтенда... какое-то НЕДОприложение получается


Kirilo [16 hours ago]
А как вы планируете реализовывать REST API?


Kirilo [16 hours ago]
Как будет фронтенд дергать приложение, если не через браузер? (edited)


Kirilo [16 hours ago]
Вообще мы реалезуем MVC, разве что кроме View


Kirilo [16 hours ago]
Но все равно мы туда должны передать (edited)


Kirilo [16 hours ago]
View - у нас браузер


Kirilo [16 hours ago]
Я что-то не слышал, чтобы фронтенд работал с коммандной строкой, например (edited)


Prodigy [16 hours ago]
пока не планирую по причине того что не знаком с rest)


Kirilo [16 hours ago]
это то, что мы передаем наружу


Kirilo [16 hours ago]
команды


Kirilo [16 hours ago]
то бишь ссылки


Kirilo [16 hours ago]
Мы наше произведение отдаем фронтенду


Kirilo [16 hours ago]
А он уже выводит все красиво

Prodigy [16 hours ago]
я не знаком с понятием рест, но имею опыт написания приложений на спринг-мвс.... вместе с пользовательским интерфейсом.... а это то еще удовольствие верстать интерфейс)


Kirilo [16 hours ago]
Например используя javascript (edited)

Kirilo [16 hours ago]
то бишь вместе с элементами фронтенда


Kirilo [16 hours ago]
Мы должны видеть что творится в консоли хотябы


Kirilo [16 hours ago]
то бишь в браузер таки нужно передавать


Prodigy [16 hours ago]
так что значит тогда without frontend ? )


Kirilo [16 hours ago]
мы не выводим на страничку, я так понимаю (edited)


Kirilo [16 hours ago]
просто тестим в консоли

Kirilo [16 hours ago]
написали командочку - получили ответ (edited)


Prodigy [16 hours ago]
то есть мы просто тестим наш контроллер мвс?


Kirilo [16 hours ago]
ага


Kirilo [16 hours ago]
post и get запросы (edited)


Prodigy [16 hours ago]
ну тогда понятно... но всё равно с интерфейсом веселее было бы))


Kirilo [16 hours ago]
так это должно быть легче


Prodigy [16 hours ago]
эх... добрый человек Григорий)


Kirilo [16 hours ago]
Типа задал головоломку?

Kirilo [16 hours ago]
:slightly_smiling_face:

Kirilo [16 hours ago]
тогда, "добрый"


Prodigy [16 hours ago]
типа лишил своих подопечных лишних страданий связанных с пользовательским интерфейсом)


Kirilo [15 hours ago]
Так и на основном хватит вскрыть мозг


Kirilo [15 hours ago]
Там от одного бутстрепа только...


Prodigy [15 hours ago]
как по мне, у меня пользоавтельский интерфейс занимает львиную долю всего времени разработки


Kirilo [15 hours ago]
естественно. Раньше, как бы java разработчики этого не делали


Prodigy [15 hours ago]
бутстрап относится к юзер-интерфейсу


Kirilo [15 hours ago]
А теперь ты должен все понимать


Kirilo [15 hours ago]
Ну, да


Prodigy [15 hours ago]
или есть еще какой-то бутстрап?


Kirilo [15 hours ago]
Вот там и начнутся пляски

Kirilo [15 hours ago]
Да, для красоты пользовательского интерфейса (edited)

Prodigy [15 hours ago]
ну я знаком с бутстрапом и пользовался им, скажу что он очень облегчает разработку


Prodigy [15 hours ago]
Григория тестовое приложение еды сделано с использованием бутстрапа


Kirilo [15 hours ago]
Я как бы понимаю, что в нем шаблоны, но че-то не догнал (edited)


Kirilo [15 hours ago]
Я о том и пишу


Prodigy [15 hours ago]
с бутстрапом проблем нет, с версткой масса проблем... это зло (edited)

Prodigy [15 hours ago]
это зло злейшее... ну как по мне)


Kirilo [15 hours ago]
Кстати, попробовал спрингбут запустить, получается, что он автоматически томкэт устанавливает? (edited)


Prodigy [15 hours ago]
с бутом не знаком


Kirilo [15 hours ago]
я так понимаю, что он упрощает рутину

Kirilo [15 hours ago]
Просто в задании намекается, что можно с ним как-то делать.


Prodigy [15 hours ago]
слышал что он много чего  облегчает

Prodigy [15 hours ago]
хм... не в курсе

Kirilo [15 hours ago]
В общем можно без него :slightly_smiling_face:


Kirilo [15 hours ago]
Там просто, делаешь как здесь: https://youtu.be/bNDnjme8B2o
YouTube Technology4u
How to create spring boot application in Intellij IDEA
 


Kirilo [15 hours ago]
Достаточно поставить галочку Web - Rest Repo (edited)


Prodigy [15 hours ago]
да, смешной китаец)


Kirilo [15 hours ago]
это индус. Они так разговаривают (edited)


turhanow [Yesterday at 11:07 PM]
привет всем) может вопрос глупый, но тем не менее. 
мы в topjava репу реализуем через jdbc, jpa. 
в выпускном проекте нам аналогично делать или на выбор?


11 replies
Kirilo [17 hours ago]
сначала как можешь. (edited)


Kirilo [17 hours ago]
И далее будут добавляться технологии


turhanow [17 hours ago]
а что значит сначала?)) потом кто то в определенный момент даст "отмашку" типа делай через то-то или то-то?)


Kirilo [17 hours ago]
Выше Григорий написал


Kirilo [17 hours ago]
https://topjava14.slack.com/archives/CBSTXJWBD/p1531952097000144
Grigory Kislin
Выпускной проект https://github.com/JavaWebinar/topjava/blob/doc/doc/graduation.md пишется постепенно: после прохождения занятия можно добавить его функционал в выпускной проект. Нарпимер совсем не обязательно делать REST контроллеры до того, пока мы их не прошли на 7м занятии.
Posted in #graduationJul 19th at 1:14 AM


turhanow [17 hours ago]
ну то есть получается надо все технологии задействовать, чтобы ревьюист смог оценить знания по всему стеку


Kirilo [17 hours ago]
Не все, а те, которые без фронтенда и всяких лишних переключений профилей



Prodigy [16 hours ago]
а чего бы не накинуть разных фичь в проект... солидней будет смотреться и покажет знания человека)


turhanow [15 hours ago]
А как же цитата Григория про " совершенство достигнуто тогда, когда нечего убрать"))


Kirilo [15 hours ago]
там же столько рекомендаций под заданиемпроекта (edited)


Kirilo [15 hours ago]
В общем -лишнего не делать


Kirilo [Yesterday at 11:23 PM]
Подскажите, если создавать новый проект с включенной галочкой Spring MVC, по каким правилам называть "Module name", что требует Idea?


2 replies
matrocob [15 hours ago]
я сразу создавал Maven и от туда плясал уже


Kirilo [13 hours ago]
Просто сначала GitHub подключил. Но уже на проект кинул pom.xml


Anton Kiselev [4:57 PM]
Всем привет) У кого как дела с трудоустройством? Поделитесь впечатлением, если не сложно)


Crazz [Jul 25th at 3:54 PM]
а как отвечать например JSON`ом на например GET запрос? где можно почитать


12 replies
Kirilo [2 days ago]
https://coursehunters.net/course/sovremennyy-javascript-s-samogo-nachala
coursehunters.net
Современный JavaScript с самого начала - Видеоуроки
Научитесь создавать проекты с использованием чистого JavaScript (без фреймворков или библиотек). Это курс JavaScript предназначен абсолютно для всех. (7 kB)


Kirilo [2 days ago]
Посмотри здесь хорошие уроки по javaScript


Kirilo [2 days ago]
с нуля, хоть на инглише, но все понятно показывает


Yevhen Maksymovych [2 days ago]
по-хорошему, мы чуть дальше подключим spring-mvc, он сам умеет оборачивать ответ в json, для этого не надо будет делать буквально ничего :slightly_smiling_face:


vch [2 days ago]
А где в выпускном проекте пригодится JavaScript???


Crazz [2 days ago]
эээм, это все конечно замечательно, но мне надо из спринга ответить


Yevhen Maksymovych [2 days ago]
тогда просто для контроллера укажи, что возвращаемый ответ надо положить в @ResponseBody, и в поме подключи какой-нибудь биндер


Kirilo [2 days ago]
мы сJSonom напрямую не работаем, у нас все распарсивается через инструменты (edited)


shtramak [2 days ago]
spring mvc и spring rest, уже написали  ¯\_(ツ)_/¯


shtramak [2 days ago]
Просто по заданиям еще не дошли до этого



Crazz [2 days ago]
во, @ResponseBody, это то что надо, спасибо!


Grigory Kislin [1 day ago]
7-е занятие


Kirilo [Yesterday at 6:27 AM]
https://habr.com/company/netologyru/blog/327294/
Хабр
Что должен уметь фронтенд-разработчик
Редактор «Нетологии» Светлана Шаповалова разбирается в том, кто такой фронтенд-разработчик, что он должен уметь (или не должен), и за что ему платят прекрасную... (34 kB)


5 replies
Prodigy [1 day ago]
а к нам это каким боком относится?)


Alexander Pilipenko [1 day ago]
Выучил это все, а потом как на GitHub


Alexander Pilipenko [1 day ago]
https://habr.com/post/418257/
Хабр
Github.com отказывается от использования jQuery и переходит на чистый JavaScript
Сегодня Mislav Marohnić объявил о том, что разработчики Github избавились от jQuery на фронтенде GitHub.com. Казалось бы, в самом этом факте нет ничего... (64 kB)


realcorwin [1 day ago]
вся статья - замануха на курс авторов статьи :slightly_smiling_face:



Kirilo [1 day ago]
Здесь о том, что к нам не относится :slightly_smiling_face: Но мы приложение делаем для фронтенда. То есть, чтобы примерно понимать их поле деятельности. Границы между бэкендом и фронтендом. (edited)


Kirilo [Yesterday at 8:08 PM]
Кто уже разобрался с командами CURL?  Как смоделировать регистрацию, что мы делаем на topjava при первом запуске приложения? То бишь у нас есть кнопка, которая по сути отправляет данные из формы(userId=100000 или userId=100001) POST запросом на страницу http://localhost:8080/topjava/users. При этом открывается http://localhost:8080/topjava/meals уже с едой нужного пользователя. Как правильно передавать userId=..... на http://localhost:8080/topjava/users ?  Нужно ли еще к командам добавлять GET запрос http://localhost:8080/topjava/meals ? (edited)


3 replies
Kirilo [1 day ago]
А!!!! Я на седьмом небе от счастья!


Kirilo [1 day ago]
Таки я правильно вопрос поставил! Что значит, выспался, выпил кофе сходил в душ и посмотрел на проблему наново :slightly_smiling_face: (edited)


Kirilo [1 day ago]
Кстати, хороший пример для исследования и понимания работы CURL.


Alexander Pilipenko [Yesterday at 8:35 PM]
https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request
Super User
What is the cURL command-line syntax to do a POST request?
How can I make a POST request with the cURL command-line tool?
 


3 replies
Kirilo [1 day ago]
Спасибо. только что сам нашел решение. CURL не делает редиректы сам, как это у нас в браузере происходит. То бишь последовательно нужно вызывать сначала POST запрос, затем GET (edited)


Alexander Pilipenko [1 day ago]
Curl и не должен его делать. (edited)


Kirilo [22 hours ago]
Не думаю, что это так очевидно. Не возник бы данный вопрос. Только когда тестируешь в консоли браузера, более-менее понятно что к чему. В POST запросе CURL просто пустой ответ приходит, а между делом, в ответ на наш запрос генерится еще один GET запрос с сервлета на который мы послали данные.


Crazz [11:01 PM]
Sheeeeet попытки переконфигурировать topjava как spring mvc становятся похожими на попытки родить ежа, почему полная идентичность трёх конфиг.файлов (сгенерированного по template mvc приложения и приложения на базе topjava) даёт разные результаты??? Шаблонное работает, а второе не может инициализировать контекст листенер


Sergey [Today at 12:18 AM]
Приветствую всех. Простой вопрос чет мучает. Как будет вести себя метод голосования, если голосовать уже поздно(в случае повторного голосования). По-моему, кидать exception как-то некрасиво. По идее, надо просто сообщить пользователю, что уже поздно. Значит наш метод в этом случае просто должен прерваться и все? Или все таки какой-нибудь tooLateException заделать?


3 replies
Kirilo [22 hours ago]
На примере topjava, ошибки возникают в сервисе. Соответственно дальше ты делаешь обработку этих ошибок и сам решаешь что с ними делать. Выдавать сообщение пользователю или прерывать работу приложения и т.п..


Kirilo [22 hours ago]
Как я понимаю, мы ошибки разделяем на группы и дальше обрабатываем их соответственно их типу. Сначала используем как заглушку, логируем некорректную работу данных, работу приложения. Затем добавляем функциональность исходя из нужд приложения, пользователя. (edited)



Grigory Kislin [4 hours ago]
можно по разному делать. я бы счас сделал спец. эксепшен.  обработка эксепшенов будет на 10м занятии (edited)


Grigory Kislin [7:19 PM]
на тему CURL, MVC и json-  у нас будет 6е и 7е занятие (edited)


svis [11:13 PM]
вопросик такой - админы жестко закреплены за определенными ресторанами или любой админ может создать/отредактировать меню для любого ресторана?


svis [Today at 11:14 PM]
по жизни должны быть закреплены


2 replies
e.pekhterev [7 minutes ago]
в задании ничего не говорится про редактирование ресторана, в том плане, что админы точно его могут создать, могут добавить меню, но могут ли удалять/изменять сами рестораны - не понятно (edited)


svis [< 1 minute ago]
да и если они могут все переписывать меню созданное другим админом безо всяких ограничений - это тоже как то бардачно смотрится


SergeyA [Jul 29th at 6:48 PM]
@Grigory Kislin Если я делаю *без* проверки ДЗ, то мой код все равно никто не увидит. Хочу сразу в качестве ДЗ делать совсем другой проект идея которого есть у меня. 
Что бы сохранить эффект обучения - буду описывать серверный каркас своей задачи в рамках учебной. А логику накручу сверху позже.
Вопрос: какой минус такого подхода? (edited)


2 replies
e.pekhterev [3 days ago]
минус один, но очень большой - без проверки ДЗ)))


Grigory Kislin [1 day ago]
> буду описывать серверный каркас своей задачи в рамках учебной. А логику накручу сверху позже.
не совсем подход понял, чтобы про минусы сказать


realcorwin [Jul 29th at 6:59 PM]
потенциальный минус в том, что работа эта потом идёт в какую-то контору, которая ищет сотрудников.


2 replies
SergeyA [3 days ago]
не сразу понял о чем ты? Но кажется догадался:
Если  имеется ввиду, что надо будет показывать код этой работе при трудоустройстве, то проект пишу хоть и личный - но сделаю сначала простой каркас сервиса как учебный. 
А личную функциональность прикручу сделав приватный форк  (или как оно там называется). :slightly_smiling_face: (edited)


Grigory Kislin [1 day ago]
в git нет приватных фоков если что
в gitlab/bitbucket есть бесплатные приватные репозитории


SergeyA [9:54 PM]
Кстати в задании ничего не говорится про покрытие тестами.  Кто как думает  - тесты делаем?

Victor [9:59 PM]
да.


Sergey [Jul 30th at 1:21 PM]
Доброго времени суток. Что-то сервис для блюд меня в тупик немного поставил. У нас ведь на topjava мы когда еду апдейтим удаляем и т.д., всегда подается userId. Чтобы проверить, что еда не чужая. Тут ситуация чем-то похожа. Есть сущность блюдо. У нее есть поле ресторан. Но вот нужен ли айдишник ресторана в сервисе при поиске, модифицировании, удалении? Смысл по нему проверять что-то?


5 replies
Alexander Pilipenko [2 days ago]
Рекомендации
Сделай новый проект и добавляй туда из Topjava только то что нужно! Локализация, типы ошибок, BeanMatcher, Json View, излишние делегирования и наследования - не нужны!
API продумывай с точки зрения не программиста и объектов, а с точки зрения того, кто им будет пользоваться (frontend)
Сначала сделай основной сценарий по ТЗ. Все остальное (если очень хочется, 3 раза подумай) - потом.


Alexander Pilipenko [2 days ago]
Как планируешь обращаться к своему API?

Ma3stro [1 day ago]
@Sergey, ты планируешь вытаскивать все-все блюда? Мне кажется, что следует доставать блюда у конкретного ресторана, это и будет меню


Sergey [1 day ago]
Само собой. Вытаскивать по ресторану и датам. речь именно про удаление, поиск одного(по id). Думаю, тут все равно в каком оно ресторане.

Grigory Kislin [1 day ago]
@Sergey если у тебя в REST иерархия ресурсов (те по url еда принадлежит ресторану)- то полагаю проверять надо (edited)


ilya t. [Jul 30th at 8:01 PM]
всем привет :slightly_smiling_face: пытаюсь написать тесты на базу, но увы пока не выходит. Такая проблема, сама база развернута (hsql), но при попытке каких-либо манипуляций выскакивает Caused by: org.hsqldb.HsqlException: Database lock acquisition failure: lockFile:... На стаковерфлоу писали что можно просто удалить лок файл (думаю этот вариант неправильный да он и не работает), либо коннектиться к базе отдельно от среды разработки. Может у кого то было такое, а то долго сижу уже, пните в правильном направлении.


3 replies
Alexander Pilipenko [1 day ago]
Могу конечно ошибаться, но по-моему в видео для 4 м 5 уроков про это говорилось


Join_Selectovich [1 day ago]
перезагрузи комп попробуй


Grigory Kislin [1 day ago]
если я правильно понял проблему- к базе может приконнектится либо приложение, либо тесты, либо ты сам (те нельзя одновременно) (edited)


Jury Mironov [Aug 2nd at 9:52 AM]
Всем привет. Как лучше реализовать счетчик , чтобы не было проблем с многопоточностью? В итоговом задании нужно считать голоса для ресторана. У меня счетчик - поле класса, который кладется в БД. Можно сделать atomic Intrger, но в базе нет такого типа данных


32 replies
Stanislav [1 day ago]
https://stackoverflow.com/questions/46173921/how-to-persist-an-atomicinteger-in-hibernate-instead-of-integer
Stack Overflow
How to persist an AtomicInteger in hibernate instead of Integer?
I try to persist an object that have an AtomicInteger variable instead of an Integer using the hibernate java framework (I need use the object in a thread safe scenario after save it) but when i t...
 


Stanislav [1 day ago]
Но то как ты реализовываешь, не очень нравится

Stanislav [1 day ago]
Это по сути аналог DTO MealWithExceed свойство exceed


Jury Mironov [1 day ago]
exceed же булеан


Alexander Pilipenko [1 day ago]
А в чем разница?

e.pekhterev [1 day ago]
я бы не делал этот счётчик внутри ресторана


Alexander Pilipenko [1 day ago]
ИМХО я бы вообще не делал счетчик. И даже считал голоса с помощью БД

Jury Mironov [1 day ago]
можно и так, думал об этом

Stanislav [1 day ago]
sql count (edited)


Jury Mironov [1 day ago]
типа в отдельную таблицу сложить все голоса, а потом посчитать?


e.pekhterev [1 day ago]
ну я пока в эту сторону смотрю

e.pekhterev [1 day ago]
ведь голоса у нас динамичны до 11.00

e.pekhterev [1 day ago]
да и они зависят от даты, поэтому ну просто не выжу смысла заталкивать такую переменную в ресторан (edited)

Stanislav [1 day ago]
Голос отдельная сущность

e.pekhterev [1 day ago]
это кто сказал)??


Stanislav [1 day ago]
У Меня Голос отдельная сущность - я сказал :wink:


e.pekhterev [1 day ago]
@Stanislav а дальше как? ресторан имеет ленивую коллекцию *голоса*?

Stanislav [1 day ago]
@e.pekhterev нет :slightly_smiling_face:


Stanislav [1 day ago]
Я голосую не за ресторан


e.pekhterev [1 day ago]
@Stanislav я думал в другую сторону. делаем табличку 
дата, user_id, restaurant_id
в эту табличку каждый юзер может писать (отдавать голос или изменять его) до 11.00


e.pekhterev [1 day ago]
параллельная таблица
дата, ресторан_id, menu_id


Stanislav [1 day ago]
можно и так, реализаций много может быть

e.pekhterev [1 day ago]
да я не спорю

e.pekhterev [1 day ago]
просто не догоняю пока твой вариант с голосами как сущностями

Alexander Pilipenko [1 day ago]
дата, user_id, restaurant_id - вот это и есть сущность Голос


e.pekhterev [1 day ago]
@Alexander Pilipenko пока не могу сказать, но как минимум для этой сущности тут нехватает голос_id


Alexander Pilipenko [1 day ago]
Ну будет id, дата, user_id, restaurant_id


Alexander Pilipenko [1 day ago]
Это уже детали

e.pekhterev [1 day ago]
надо попробовать


Grigory Kislin [1 day ago]
>  В итоговом задании нужно считать голоса для ресторана
это где такое в ТЗ???

Jury Mironov [1 day ago]
Users can vote on witch restaurant they want to have lunch.  Не написано,  что надо их считать,  но как-то сложить же надо голоса куда-то. Не говорится как это должно быть релизовано и как их засчитывать.  По идее можно сделать int и с новым голосом будет просто увеличиваться значение на один.


Grigory Kislin [1 day ago]
я бы рекомендовал НЕ ДЕЛАТЬ подсчет. огромное кол-во ошибок получают в реализации того, чего нет в ТЗ


svis [3:00 PM]
Есть небольшой вопросик к стейкхолдерам (Григорию, Татьяне и Катерине) по поводу  ревью garduation проекта.


svis [Aug 2nd at 3:01 PM]
C какого момента готовности проекта (или прохождения курса topjava) можно приглашать Вас на ревью?


6 replies
vch [1 day ago]
Вроде ревью выпускного проекта делается только 1 раз?..



svis [1 day ago]
Я вот не знаю. Может это где-то говорилось, но как-то мимо прошло


Prodigy [1 day ago]
ага, 1 раз и желательно по окончании проекта


Join_Selectovich [1 day ago]
ну да, где-то говрили что 1 раз тока )


Grigory Kislin [1 day ago]
подтверждаю- 1 раз, делаю я. поэтому лучше, кода уже будет все готово, но до дедлайна (edited)


svis [1 day ago]
ok, спасибо


zippospb [11:20 PM]
я правильно понимаю, что в выпускном проекте, так же, как и в учебном желательно реализовать несколько реализаций репозиториев (jdbc, jpa, datajpa)?


Victor [1 day ago]
нет, зачем? Этот проект будет как визитка. Его можно будет показывать как соискателю. Если хочешь показать, что знаешь jdbc, нужно написать отдельный проект. ИМХО


Victor [1 day ago]
и, в идеале, выбор технологий должен быть обоснован. Должен мочь объяснить почему используется эта а не та.


SergeyA [1 day ago]
Вот ровно то де самое хотел спросить, а тут уже и ответ есть :) 
Значит выбираем сами вариант работы с хранилищем.


Grigory Kislin [11 hours ago]
в замечаниях есть и про много профилей (не надо) и про предпочтительно spring-data-jpa
читайте внимательно! (edited)


Mihail Kedel [Today at 5:40 PM]
для выпускного проекта spring security не надо?


1 reply
Ma3stro [5 hours ago]
А как доступ по ролям настраивать?)


Kirilo [3:59 PM]
может кому пригодится: http://developerkiselev.blogspot.com/2016/11/restcontroller-vs-controller.html
developerkiselev.blogspot.com
@RestController vs. @Controller
Spring MVC и REST  Spring - MVC фреймфорк, использующий аннотации, которые позволяют облегчить процесс создания RESTfull веб-сервиса....
https://lh4.googleusercontent.com/proxy/a8KwcJ2WoFA_NGVWVxcLMZCSB9K6wx-x5g3O2xm8N1SLSg_viIKtGnNYVZ2nMcRznLKB0Ww-NQM_LTU4p6RtEqMZ3zJ8MyT2K1KHtNK2OP4GqzgwgRJQyanUpOiYqvblY5Vb=w1200-h630-p-k-no-nu


Grigory Kislin [3 days ago]
проще шагнуть в код @RestController и посмотреть, что там


Kirilo [Aug 16th at 7:42 PM]
В общем, при переносе функциональности на spring boot, оказалось, что jsp не рекомендуется использовать, а такой прием: <jsp:useBean id="..." type="..."  scope="request"/> и вовсе олдскул и не работает в буте.
Но зато разобрался, как заполнить такую же форму, как для новой/обновленной еды(ресотраны, блюда) используя thymeleaf.

https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-spring-mvc-template-engines

https://stackoverflow.com/questions/11813290/is-it-possible-to-implement-jsp-usebean-as-an-annotation
Stack Overflow
Is it possible to implement JSP usebean as an annotation?
I would like implement JSP useBean taglib as a class annotation... Is possible? How If so, what is the best (easy and efficient) way to do this? Example: <jsp:useBean id="p" class="beans.Pe...
 
(edited)



1 reply
Grigory Kislin [5 days ago]
у нас же нет UI в выпускном...
но если уж делать- да, thymleaf (edited)


matrocob [Aug 20th at 5:03 AM]
Блин... ребят, что-то затупил на выпускном проекте... мне кажется жесть я придумал... Думал сделать TO, как в нашем проекте, типо создаем таблицу Юзера и делаем ТО -> UserVoted.java (добавляя при этом поле boolean voted)... Логику проголосовавшего пользователя можно вынести в UtilsVoted . Потом в контроллере для голосования мы бы доставали проголосовавшего или нет юзера через UtilsVoted и отдавали бы во фронт... Наверно это ужасно плохая реализация?


10 replies
Ma3stro [5 days ago]
Мне кажется vote должно относиться не к юзеру, а к ресторану)


zippospb [5 days ago]
А зачем на фронтенде знать, проголосовал пользователь или нет? Все равно ведь бэкенд будет решать, можно пользователю первый раз проголосовать/ещё может передумать/не может передумать


matrocob [5 days ago]
ну типо после голосования поле булеан меняется в ТО и от туда плясать


zippospb [5 days ago]
Ну так оно никакой информации не несёт. Из этого булеан ты не узнаешь, можно ли проголосовать или нет,  да и за кого проголосал тоже не узнаешь


Merkulov [5 days ago]
блин, а я даже еще и не начинал делать выпускной проект(



zippospb [5 days ago]
Я пока только модели полностью сделал. Контроллеры не начинаю - жду следующего занятия,  когда про spring security будут рассказывать


Grigory Kislin [5 days ago]
1. лучше не ждать- делать что можно
2. не фрон, а по рест. и реализацию не понял...
для юзера надо реализовать просмотр своего голосования и действие "проголосовать за ресторан"


Kirilo [2 days ago]
Похоже, для того, чтобы переголосовать, нужно для юзера вводить поле с id ресторана и дату голосования.

zippospb [1 day ago]
@Kirilo а ты не делал отдельной сущности для голоса?

Kirilo [1 day ago]
@zippospb само голосование я сделал. Принцип: у каждого юзера есть поле "голосовал или нет", а рестораны накапливают колличество голосов каждый свое. Юзер перешел по ссылке на конкретный ресторан и таким образом отдал свой голос. (edited)


Grigory Kislin [16 hours ago]
@Kirilo должна быть история голосования. И думай над моделью с точки зрения хранения в перяционной базе


ilya t. [Yesterday at 1:45 PM]
господа, подскажите. Написал метод vote, куда передается id ресторана через @PathVariable. осуществляется через @PostMapping, но постом не работает - "Request method 'GET' not supported spring". Соответственно либо переправить на гет и все будет работать, но это не по принципам рест, либо делать через реквестбади? Видимо я что-то не понимаю. Можно ли как то запустить постом через @PathVariable?


2 replies
Ma3stro [24 hours ago]
необязательно PathVariable)



ilya t. [23 hours ago]
не тупите как я и не делайте запросы пост через браузер)


alexey [Today at 9:34 AM]
Я так понял трансфер обжекты в выпускном проекте можно не использовать или все так нужны?


1 reply
sky [3 hours ago]
Специально их создавать не нужно, если не видишь в них необходимости в своей реализации.


ilya t. [Aug 31st at 5:47 PM]
Мучает такой вопрос - правильно ли будет брать рестораны из базы без списков блюд, а вместо этого сделать отдельный метод в контроллере блюд который если нужно по запросу берет блюда для ресторана? Или игером брать предпочтительнее сразу в одном запросе? Или это зависит от того как представляешь клиент?  :slightly_smiling_face: Есть сомнение (edited)


1 reply
Grigory Kislin [3 days ago]
да, всегда при определении API есть сомнения.
на мой взгляд рестораны с едой делать нужно


Jury Mironov [Sep 8th at 9:29 AM]
Скопипастил AuthorizedUser в проект.  У нас user. getRoles возвращает сет и все норм,  у меня в выпускном пр.  тоже возвращает сет. Только у меня в констуркоре говорит,  что collection extends org. spring...user давай. Я не понимаю почему его сет не устраивает,  если в проекте учебном все устраивало


5 replies
Jury Mironov [2 days ago]
Snap 2018-09-08 at 09.36.14.png



Jury Mironov [2 days ago]
Snap 2018-09-08 at 09.39.23.png



Jury Mironov [2 days ago]
Snap 2018-09-08 at 10.07.47.png



sky [2 days ago]
здесь была подсказка, теперь нет.. (edited)


Grigory Kislin [1 day ago]
@Jury Mironov попробуй разобраться, не подглядывая в ответ @sky . совсем простая задача для прошедшего topjava (edited)


Kirilo [4:22 PM]
С чем может быть связана проблема доступа к ресурсам? Когда сделал in memory, все ОК. Когда с базы берет, то аутентификацию проходит, а с авторизацией беда. Не принимает ни одну роль.
There was an unexpected error (type=Forbidden, status=403).
Forbidden

Использую spring boot. Пароли не шифрую. Отключил вот так: auth.userDetailsService(userDetailsService()).passwordEncoder(NoOpPasswordEncoder.getInstance());
Но и проблема именно с авторизацией. (edited)

Kirilo [4:40 PM]
Странно, фильтры перестали работать. Но почему, тогда, они в in memory работали?
   protected void configure(HttpSecurity http) throws Exception {
/*        http.csrf().disable().httpBasic().and()
               .authorizeRequests()
               .antMatchers("/").permitAll()
               .antMatchers("/rest/admin/**").hasAnyRole("ADMIN")
               .antMatchers("/rest/**").hasAnyRole("USER")
               .anyRequest().authenticated();*/
       http.authorizeRequests().anyRequest().fullyAuthenticated().and().
               httpBasic().and().
               csrf().disable();
   }
То, что закоментировано, работало в in memory, но не работает с базой (edited)

Kirilo [10:10 PM]
Разобрался. Оказывается Spring добавляет приставку "ROLE_" к ролям. Поэтому в базе и в конфигурационном файле названия должны отличаться.


alexey [Yesterday at 9:49 PM]
Народ до какого числа нужно проект на проверку сдать?


2 replies
e.pekhterev [19 hours ago]
если не ошибаюсь до 04.10
 


Grigory Kislin [18 hours ago]
если не участник masterjava. им до конца года.


Jury Mironov [Today at 12:28 AM]
Добавил security xml и имплементацию классов из проекта. У меня web.xml с сервлетом. Без security все деплоилось. Как добавил пишет ошибка 500  java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener or DispatcherServlet registered? org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)


8 replies
Jury Mironov [17 hours ago]
Ок, говорят, что листнер добавь <listener>
   <listener-class>
       org.springframework.web.context.ContextLoaderListener
   </listener-class>
</listener>


Jury Mironov [17 hours ago]
Добавил, после этого ошибка, что- org.apache.catalina.core.StandardContext.startInternal One or more listeners failed to start. Full details will be found in the appropriate container log file


Jury Mironov [17 hours ago]
И хз че делать


Jury Mironov [17 hours ago]
https://github.com/mironoff2007/graduate_project/tree/master/src/main/webapp/resources/spring


Jury Mironov [17 hours ago]
https://github.com/mironoff2007/graduate_project/blob/master/src/main/webapp/WEB-INF/web.xml
src/main/webapp/WEB-INF/web.xml
```<?xml version="1.0" encoding="UTF-8"?>
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://xmlns.jcp.org/xml/ns/javaee"``` 
Show more…
mironoff2007/graduate_projectAdded by GitHub


Grigory Kislin [2 hours ago]
прочитать вот это:
> Full details will be found in the appropriate container log file
действовать согласно указанию
каталог лог файлов можно найти с строке запуска IDEA томката
либо в томкат задеплоить самому (edited)


Jury Mironov [9 minutes ago]
Пишет,  типа нет applicationContext.xml.  Добавил,  написал туда импорты моих spring-db. xml,  security и. servlet файлов. Пишет типа файл spring-db. xml не найден


Jury Mironov [1 minute ago]
Я не очень понимаю все эти замуты с xml файлами.  Было их два, все было норм.  Был сервлет и ДБ,  теперь танцы с бубном.


Jury Mironov [1 day ago]
Я не понимаю,  до добавления секьюрити его не парило,  что нет контекста:face_with_rolling_eyes:


Jury Mironov [1 day ago]
Вроде пофиксил


Kirilo [10:20 PM]
Использую две сущности для сохранения изминений в голосовании и кладу в два разных репозитория в одном методе update(.., ...) сервиса. Правильно будет использовать над этим методом @Transactional в интерфейсе сервиса? (edited)


Grigory Kislin [3 days ago]
с @Transactional- да. а вот 2 сущности- неверно...
означает дублирование в базе. опять же данные могут разойтись (edited)


Kirilo [3 days ago]
одна сущность - это юзер с измененным состояним после голосования, другая - это сущность голосования за определенный ресторан, она появляется, после того, как админ добавляет новое меню и накапливает в себе дневной результат. (edited)


This message was deleted.
 
Merkulov 2 days ago
ну да, вроде так

sky 2 days ago
Ну тут как понимать задание. Голосовать за ресторан, в котором хочешь съесть ланч часов в 9 вечера уже как то не ок.

e.pekhterev 2 days ago
@sky, я собственно потому и задаю этот вопрос, хорошо Григорий тут ответил)))

sky 2 days ago
хорошо бы, или он уже где ответил? Тут вроде как тоже проверятся способность интерпретировать задание. Взглянуть на него с точки зрения фронта и м.б. потребителя (хотя вот это хз хз, можно ли вообще в такое свой нос совать). В задании (и где-то еще) правда несколько раз упоминается что сам текст задания надо читать внимательно. (edited)

e.pekhterev 2 days ago
@sky, в задании написано 5.4 Из потребностей приложения (которую надо самим придумать) реализовывать только очевидные сценарии. Те.- НИЧЕГО ЛИШНЕГО., т.е. по идее очедно делать полнсотью ограничение до 11:00, что для первого раза, что для повторного, но сомнения всё же есть, потому как у нас тут явно указаны кейсы именно для повторного голосования))) (edited)

Merkulov 2 days ago
наверное все таки должно быть ограничение, вдруг кто проголосует прям за 5 минут до ланча а кто за 1 минуту

Kirilo 2 days ago
там ничего не сказано о том, до какого времени голосовать. А сказано, что, если юзер захочет еще раз голосовать, то сделать он это может до 11:00. То есть я сделал, что голосовать вообще можно до полуночи, а дальше сможет только за меню следующего дня. Переголосовать до 11:00. А голосовать до 24:00 (edited)

e.pekhterev 2 days ago
консенсунс не достигнут))) (edited)
Kirilo 2 days ago
На практике, думаю, нужно было бы задать уточняющие вопросы у заказчика. Но так как имеем то, что имеем, то логику действий я описал выше.
e.pekhterev 2 days ago
@Kirilo согласен, я тоже так и думал, но решил уточнить

Kirilo 2 days ago
К тому же с таким подходом легко реализовать историю голосования. Что я и сделал :slightly_smiling_face:
e.pekhterev 2 days ago
в смысле? ты не обновляешь  голос, а создаешь новый? т.е. у тебя несколько голосов на юзера в день может быть? или чего? (edited)
Kirilo 2 days ago
переголосование. Я храню последний id ресторана, за который голосовал юзер в его сущности. (edited)

e.pekhterev 2 days ago
ну тогда не вижу никакой проблемы с историей, что с ограничением по времени для повторного голосования, что для полного голосования

e.pekhterev 2 days ago
тут момент другой, если у нас полное ограничение, то итоги голосования известны уже в 11.00, а при не полном ограничении результаты голосования можно узнать только в 00.00

Kirilo 2 days ago
результаты можно, ведь просто вытянуть в любое время. Например, если юзер проголосовал (edited)
e.pekhterev 2 days ago
и в этом плане + ещё о времени самого ланча ну очень нелогично делать ограничение голосования только для повторов
Kirilo 2 days ago
условия нет больше никакого. Сама задача некорректная

e.pekhterev 2 days ago
результаты можно, ведь просто вытянуть в любое время. Например, если юзер проголосовал
я говорю о общем результате - например общую стату актуальную  по ресторанам  за день

e.pekhterev 2 days ago
окончательную
Merkulov 2 days ago
логично ведь что если ланча не было то можно за него голосовать а если был то что я могу проголосаовать в тот день за этот ланч который уже прошел?
Kirilo 2 days ago
ну, вот. Я вообще с этим не парюсь. У меня новая сущность для голосования появляется каждый день

e.pekhterev 2 days ago
Build a voting system for deciding where to have lunch
по условии ты голосуешь за ресторан, в котором ты сегодня хочешь отланчевать

Merkulov 2 days ago
смысл голоса после проведения мероприятия?
Kirilo 2 days ago
так и обедать ты можешь либо когда. Постановка задачи недоработанная (edited)
e.pekhterev 2 days ago
и никак по другому
Merkulov 2 days ago
так зачем мы тогда голосуем за ресторан?
Kirilo 2 days ago
просто так

Kirilo 2 days ago
ты же можешь и не пообедать, если чп :slightly_smiling_face:

e.pekhterev 2 days ago
ну не всё очевидно, но тут голосуем за ресторан где хотим отланчевать - значит 100% до ланча, значит ограничение должно быть до 11:00

Merkulov 2 days ago
получается тупо
Merkulov 2 days ago
теряется смысл системы голосования, если не важно голосовали или нет)))
Kirilo 2 days ago
но о ограничении по времени ничего не сказано. И у всех может быть обед в разное время.
e.pekhterev 2 days ago
не хочешь ланчевать - не голосуешь, хочешь - голосуешь до 11:00

Kirilo 2 days ago
Задача просто на голосование. А обед можно заменить на просто прием пищи

e.pekhterev 2 days ago
в условии указано голосование за ланч, не за обед
Merkulov 2 days ago
тут смысл задачи голосование за ланч, а ты хочешь сделать чтоб это было не важно
Kirilo 2 days ago
Прочитай задание про переголосование. Там ограничение до 11:00 только для тех, кто повторно голосует

e.pekhterev 2 days ago
Задача просто на голосование. А обед можно заменить на просто прием пищи
если было бы так, то не было бы вообще ограничений по времени

e.pekhterev 2 days ago
Прочитай задание про переголосование. Там ограничение до 11:00 только для тех, кто повторно голосует
ну как бы оно в шапке ветки написано, потому и вопрос возник

Kirilo 2 days ago
Ну, так для тех, кто повторно голосует. А для остальных вообще ничего не сказано, ровно как и до которого часа может быть обед
e.pekhterev 2 days ago
ладно, надеюсь Григорий нас рассудит
Merkulov 2 days ago
логика должна была уже рассудить)

Kirilo 2 days ago
он уже писал, что делать только то, что написано

Merkulov 2 days ago
это ключевой момент

Kirilo 2 days ago
а ограничение только до 11 для тех, кто повторно голосует

e.pekhterev 2 days ago
если будут вопросы, то скажу, что у меня Spain-mode, после ланча сразу сиеста))))
Kirilo 2 days ago
он написал в комментариях к заданию, что подобные "хотелки" нужно описывать отдельно, как доработка задания от себя лично (edited)

e.pekhterev 2 days ago
@Kirilo я ни за первый вариант, ни за второй, пока вижу, что условия неоднозначные, но и с твоими доводами не согласен

Merkulov 2 days ago
@Kirilo приколи если выборы так проходили, выборы определенного числа, но ты можешь голосовать и после, но только это будет не важно)))
sky 2 days ago
Подумайте с точки зрения желающего пообедать. Вот вы зашли на сайт. Глянули че у кого сегодня на обед. То что вы голосуете, это конечно очень хорошо, но скорее всего вы просто выберите, что из топа рейтинга вам ближе географически.  И туда и пойдете. И это именно обед, который у большинства именно с 12 до часу. И к 11 уже неплохо бы определится. Смысла после этого времени голосовать особо нет.  Но в данное задание скорее надо воспринимать буквально. Только заложить возможность быстро переобуться..

Kirilo 2 days ago
это тестовая задача и ничего не имеет общего с реальной жизнью. Если так углубляться в вопрос, то нужно представить, что рестораны находятся в разных уголках города, а голосует юзер, допустим перед самым началом обеда. И что, он успеет к положеному времени? Не стоит заморачиваться как по мне, а просто придерживаться условий, что в задании и все.
Kirilo 2 days ago
@Merkulov ну это совсем бред. Ограничение голосование за текущий день. На следующий день голосует за другое меню (edited)

Merkulov 2 days ago
ты меня не правильно понял

Merkulov 2 days ago
я гоорил про текущий день
Merkulov 2 days ago
пример привел выборы
Merkulov 2 days ago
мы вообще говорим в контексте одного дня ставить ограничение по времени или нет

Merkulov 2 days ago
в любой задачи должен быть здравый смысл, иначе будет каша

Merkulov 2 days ago
думаю походу разберемся
Kirilo 2 days ago
много заморочек со временем возникнет и когда админ должен вносить меню и т.д. Вообще в даной постановке, ее нельзя применить к реальной жизни. Я ее воспринимаю просто, как тестовую задачу. (edited)

sky 2 days ago
Если предметная область достаточно близка, а пожрать все горазды, то почему бы не строить свое понимание ТЗ на этой основе, при этом без отклонений от этого ТЗ. Сказано что в любое время можно в первый раз проголовать - так и надо делать, но, то что вероятность того, что это поменяется тоже нужно просто сразу учитывать, а данный вопрос не то, чтобы прям большой архитектурный вопрос. Его решить потом можно будет парой строк кода..

sky 2 days ago
Про админов лучше вообще не начинать))
Kirilo 2 days ago
да и меню вносить в этот же день - это тупо и никто так не делает :slightly_smiling_face: (edited)
e.pekhterev 2 days ago
sky Сказано что в любое время можно в первый раз проголовать - так нигде не сказано

e.pekhterev 2 days ago
это только догадки

sky 2 days ago
ну это твоя догадка в первую очередь, не ожидал от тебя))
Kirilo 2 days ago
If user votes again the same day:
   If it is before 11:00 we asume that he changed his mind.
   If it is after 11:00 then it is too late, vote can't be changed

Kirilo 2 days ago
Исходя из этой фразы - голосование в тот же день - это огрничение для всех. А до 11 - для тех, что повторно (edited)

e.pekhterev 2 days ago
@sky, чего не ожидал)?

sky 2 days ago
того что именно ты будешь возражать, забей))

Kirilo 2 days ago
the same day! Не пол дня или первой половины (edited)
e.pekhterev 2 days ago
того что именно ты будешь возражать, забей))
да не возражаю я, ты посмотри в шапку ветки, я же там пишу как раз про ваш же с Kirilo вариант

Stanislav 1 day ago
Обсуждения не о чем :grinning: Есть задача, есть вопросы, но нет заказчика, вы не в праве домысливать(реализовывать) логику за заказчика. Есть идеи реализации, но нет заказчика для обсуждения, предусмотрите в "архитектуре" возможность внесении правок-фич + коммит (если уж так хочется).



This message was deleted.
 
Kirilo 2 days ago
це якщо ти будеш зберігати все в одній таблиці

Макс Куркудюк 2 days ago
Ок, дякую)


Grigory Kislin [3:38 PM]
@here
Привет!
форма для сдачи выпускного: https://goo.gl/RZVj6R
у кого есть ревью  - буду писать его в канал группы проверки ДЗ
оплатить ревью можно как "Техническое собеседование на позицию Java разработчик."- внизу своего javaops профиля (1950р)
после оплаты пишете мне, я даю ссылку на группу проверки ДЗ, где надо будет сделать канал: свое_имя_hw (edited)

Kirilo [10:46 PM]
Пока делаю выпускной проект, узнаю массу нового. С джексоном познакомился и его аннотациями. Только что окончательно поборол зацикливание в json - это случалось, когда я пытался доставать ресторан вместе с едой. А @JsonIgnore прятал список еды и мне не подходил, причем вначале я его вообще тупо применял, не зная полностью что он делает. Оказывается есть другая аннотация для правильной серриализации сущностей связанных двусторонними отношениями. А вообще кошмарная тема. На столько граблей приходится наступать. В интернете столько информации, но пока сложишь это все в кучу... Просматриваю файлы topjava и только сейчас начинаю понимать некоторые вещи, которяе раньше вообще игнорировал. (edited)

Jury Mironov [9:34 AM]
20-Sep-2018 00:23:32.390 SEVERE [RMI TCP Connection(7)-127.0.0.1] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class [org.springframework.web.context.ContextLoaderListener]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'filterChainProxy' while setting bean property 'sourceList' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'filterChainProxy': Cannot create inner bean '(inner bean)#6bf846c4' of type [org.springframework.security.web.authentication.www.BasicAuthenticationFilter] while setting constructor argument with key [3]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#6bf846c4': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'userService' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService' defined in ServletContext resource [/WEB-INF/resources/spring/spring-security.xml]: Instantiation of bean failed; nested exception is java.lang.IllegalStateException: No bean class specified on bean definition

Jury Mironov [8 hours ago]
Не понимаю, что не так. Копипастил из проекта. UserServiceImpl имплементирует UserDetailsService.


Jury Mironov [8 hours ago]
Но идея подчеркивает красным и пишет


Jury Mironov [8 hours ago]
Bean must be one of these types: org.springframework.security.core.userdetails.UserDetailsService,org.springframework.security.userdetails.UserDetailsService less... (Ctrl+F1)
Inspection info:Checks bean reference for required bean type.


Grigory Kislin [1 hour ago]
проверь
    ```<authentication-manager>
        <authentication-provider user-service-ref="userService">```
и
```@Service("userService")
public class UserServiceImpl implements UserService, UserDetailsService {```


Ma3stro [Today at 5:48 PM]
Кто-то сталкивался с проблемой невероятно долгой загрузки в режиме дебага? А без дебага запускается довольно быстро


2 replies
dmitry_ov [17 minutes ago]
Tomcat под MacOS ?
В Tomcat есть баг, надо гуглить work around


Ma3stro [16 minutes ago]
Неа, винда


Ma3stro [5:58 PM]
Подскажите, к чем приделать кэш? К ресторанам, голосам? Голоса регулярно добавляются, а рестораны регулярно обновляются, соответсвенно кэш будет всё время отчищаться


sky [6 days ago]
Тут конечно от реализации зависит, у всех же своя по идее должна быть. И у некоторых рестораны не будет особо менятся, но думаю что у большинства спойкойно можно будет закешировать юзеров.


Grigory Kislin [6 days ago]
@Ma3stro а можешь более подробно свои мысли развернуть про кэш. учитывая из ТЗ что админов мало а узеро оочень много (edited)


Kirilo [Sep 21st at 2:47 PM]
Такой вопрос. В контроллере все-таки может быть логика, если это проверка юзера? Сервис вообще не должен знать о пользователях? А, вот, проверка, голосовал ли или еще нет(чтобы показывать или нет результаты голосования) - где лучше сделать? Или это из одной оперы все? (edited)


67 replies
e.pekhterev [5 days ago]
я думаю, что проверку на первое или повторное голосование нужно делать именно в сервисе голосов. Контроллер принял запрос, мол голосуй, отправил его сервису, он уже логику приложения и реализует.

у меня другой вопрос не решен до сих пор - нужно ли делать каскадное удаление голосов при удалении юзера. с одной стороны, если делаем каскадное удаление, то у нас история голосования поплывёт, с другой, если не делаем, то будут голоса с мертвыми user_id. Где правда, други и подруги? (edited)


Kirilo [5 days ago]
вообще в задании не стоит вопрос вообще о добавлении или удалении юзеров. То бишь это не относится к заданию и может быть разве что как дополнение к основному заданию


e.pekhterev [5 days ago]
эмммм, мне казалось это само собой разумеющееся.


Kirilo [5 days ago]
например, о ресторанах и меню сказано сразу, что админ может и должен это делать (edited)


e.pekhterev [5 days ago]
а как юзеры вообще появятся))?


Kirilo [5 days ago]
а вот это уже додумки, то есть заказчик этого не требует


e.pekhterev [5 days ago]
интересно конечно))


Kirilo [5 days ago]
базу можно заполнить вообще-то не только из нашего приложения


e.pekhterev [5 days ago]
это да


Kirilo [5 days ago]
нужно исходить из того, что хочет заказчик, думаю, на этом акцент

e.pekhterev [5 days ago]
ну и удалить юзера тоже можно не из нашего приложенияч


Kirilo [5 days ago]
тоже самое. Этого не требуется. А, вот, показывать результаты голосования тем, кто еще не проголосовал, здесь, думаю, само собой понятно, что нельзя (edited)


e.pekhterev [5 days ago]
эм, это вроде тоже догадки


e.pekhterev [5 days ago]
в том же контакте это всё как админ захочет - показывать результаты или нет


Kirilo [5 days ago]
тогда вообще не показывать результаты юзерам :slightly_smiling_face:


e.pekhterev [5 days ago]
да теже выборы когда идут, результаты публичны сразу

Kirilo [5 days ago]
но тогда нет смысла в голосовании :slightly_smiling_face: для юзера (edited)


e.pekhterev [5 days ago]
можно и так


e.pekhterev [5 days ago]
но это опять же не основное и легко изменяется


e.pekhterev [5 days ago]
впрочем как и каскадное удаление

Kirilo [5 days ago]
на выборах сразу не показывают результаты, только после голосования :slightly_smiling_face:

e.pekhterev [5 days ago]
в сша вроде как голосуют по штатам и сразу же даётся инфа, до того как другие штаты проголосуют, но не суть

Kirilo [5 days ago]
ну, да, свои заморочки

e.pekhterev [5 days ago]
так всё же чем чреваты мертвые user_id в голосах?


e.pekhterev [5 days ago]
голосование по идее анонимное, на морду голоса вообще не надо по идее выводить, так что думаю проблем не должно быть


Kirilo [5 days ago]
вообще, если смотреть как в играх реалезовано, то голоса ботовские снимают (edited)

e.pekhterev [5 days ago]
я о другом

Kirilo [5 days ago]
буден нулевая ссылка. Придется фильтр делать (edited)

e.pekhterev [5 days ago]
вот берём неделю, голосуют юзеры, каждый день на первом месте какой то ресторан, потом удаляем какого юзера и история соотвественно изменится или может измениться из-за удаления голосов этого юзезра - я про это


Kirilo [5 days ago]
у меня так невозможно сделать


Kirilo [5 days ago]
только за этот день

e.pekhterev [5 days ago]
потому что у тебя юзеры не удаляются)?

e.pekhterev [5 days ago]
ты не делал историю голосования?

Kirilo [5 days ago]
нет. После удаления юзера, ничего для истории не поменяется

Kirilo [5 days ago]
Я его в истории не храню. Только результаты (edited)


e.pekhterev [5 days ago]
ну всё от реализации зависит


Kirilo [5 days ago]
Это, ведь, и логично. Переголосовывать требуется только в этот день. Так я и храню только на этот день ссылку (edited)


e.pekhterev [5 days ago]
решения могут быть разные)))

e.pekhterev [5 days ago]
аааа, допер

Kirilo [5 days ago]
я о том, что нет смысла хранить больше, чем результат голосования

e.pekhterev [5 days ago]
т.е. у тебя в сущности голос нет поля user_id

e.pekhterev [5 days ago]
круто


Kirilo [5 days ago]
да - это лишнее

e.pekhterev [5 days ago]
я о такой возможности не подумал (edited)

Kirilo [5 days ago]
я не сразу пришел к такому решению

e.pekhterev [5 days ago]
интересное решение)))

Kirilo [5 days ago]
оно простое, но зато с данными можно как хочешь вертеть

e.pekhterev [5 days ago]
можно

e.pekhterev [5 days ago]
но голосование уже тогда 100% анонимное и с этим ничего не поделаешь


Kirilo [5 days ago]
да так и нужно вообще-то :slightly_smiling_face:


e.pekhterev [5 days ago]
ты смотрел как в контакте сделано голосование?


Kirilo [5 days ago]
не... Не пользуюсь уже почти год :slightly_smiling_face:

e.pekhterev [5 days ago]
оно там не анонимное, если закрывать просмотр

e.pekhterev [5 days ago]
ну я к тому, что "должно быть только анонимным" - это только твоя догадка, делать могут как угодно



Kirilo [5 days ago]
С моей реализацией можно увидеть разве в учетке юзера, за что он последний раз голосовал. Но по другому у меня не хватает пока мозгов придумать (edited)


e.pekhterev [5 days ago]
может для паблика и должно быть анонимное голосавание, но вот для статистики и т.д. все эти данные по личному выбору обрабатываются очень активано для подбора контента, рекламы и т.д. (edited)

e.pekhterev [5 days ago]
т.е. по хорошему история голосования в полном виде должна быть доступна хотя бы админам.
а в паблик можно отдать анонимные результаты голосования


Kirilo [5 days ago]
Да, когда сам начинаешь разрабатывать, то понимаешь, что анонимность в интернете - это очень с натяжкой :slightly_smiling_face:


e.pekhterev [5 days ago]
ну а как же


e.pekhterev [5 days ago]
потом такая штуку, про ограничение видимости


e.pekhterev [5 days ago]
у нас оно до 11 если уже проголосовал, т.е. по идее и показывать результат не надо, если ещё есть возможность переголосовать


Kirilo [5 days ago]
Так а смысл переголосовывать тогда?


Kirilo [5 days ago]
Он проголосовал и посмотрел результат, и определился куда идти/ ехать (edited)


e.pekhterev [5 days ago]
ну всякие бывают нюансы

e.pekhterev [5 days ago]
ладно, это уже нюансы

Kirilo [5 days ago]
это уже в коммерческом приложении :slightly_smiling_face: (edited)

Grigory Kislin [3 days ago]
эк ск-ко написано:)
на тему ТЗ- про узеров да, ничего не сказано. опционально. можно не удалять а деактивировать
про результаты голосование- ни слова! на этом в реализации ОЧЕНЬ много ошибок. я это тестовое сдавал и прошел, результаты НЕ делал. если будуте делать- следите чтобы ооочень много юзеров не нагружали базу и не было очень заморочно (edited)


Макс Куркудюк [Sep 23rd at 3:11 PM]
На рахунок контроллерів.
Потрібно також AjaxContrjller... RestController і звісно ProfileController, RootController.
Чи зробити без Ajax, а лише Rest (з відправкою атрибутів)? (edited)


2 replies
Kirilo [3 days ago]
Лише REST - дивись завдання.


Макс Куркудюк [3 days ago]
Дякую)


Макс Куркудюк [Sep 24th at 4:21 PM]
Підкажіть, як можна у RestController у методі @PostMapping create передати і @RequestBody і id ресторану (@PatchVariable чи @requestParam)?


5 replies
Ma3stro [2 days ago]
Да как хочешь)
Можешь в пути сразу передавать, можешь и параметром запроса


Макс Куркудюк [2 days ago]
О, знайшов як це ркалізувати, щоб і тест норм відпрацьовував)
Але тепер таке питання, що краще використовувати @RequestParam (передаємо строку) чи @RequestAttribute (передаємо строку або число)?
Працює з обома..


Ma3stro [2 days ago]
Почитай разницу


Kirilo [17 hours ago]
фішка рест у тому, що ти в параметрі запиту вказуєш всю необхідну інформацію для отримання необхідного результату. Не потрібно додаткових запитів і т.п. (edited)


Макс Куркудюк [3 hours ago]
Я затупив, не поставив {} для @PachVariable... Дякую за наводки, допомогло)
Тож вже контроллери закінчив. Ще тести до них і авторизацію)


Grigory Kislin [9:59 AM]
Сегодня началась topjava15- репозиторий удалил.
выпускной есть по ссылке: https://github.com/JavaOPs/topjava/blob/master/graduation.md (edited)

Tim [10:39 AM]
Ребят, как я понял ТЗ, все юзеры голосуют за рестораны, а потом все идут исть в тот, который набрал большинство голосов. Я неправильно понял?

~Макс Куркудюк [11:58 AM]
В нас один одмін на кілька ресторанів і один ресторан на одного адміна чи все ж кілька адмінів на кілька ресторанів?
Тобто, я так розумію, що у кожного адміністратора є список рестаранів, за які відповідає лише він і він не може змінювати чужі ресторани і їх меню. Це вірно чи я туплю..?) (edited)~


Grigory Kislin [2:06 PM]
@Tim куда они пойдут- почему тебя волнует?? тебе по ТЗ голос принять


viges2201 [Yesterday at 4:33 PM]
Кто подскажет org.hibernate.LazyInitializationException: could not initialize proxy [restaurant.model.User#100000] - no Session


3 replies
alexey [20 hours ago]
в @Transactional засунь


viges2201 [19 hours ago]
Тут дело видимо в полях которые игнорировать нужно


Kirilo [6 hours ago]
MVC cofig  настраивать нужно. В ObjectMapper указывать Jackson(у) что сериализовать, что видеть. (edited)

viges2201 [12 hours ago]
спс

viges2201 [4:33 PM]
не могу найти причину почему закрывается сессия
делаю по аналогии с топджава


viges2201 [2:58 PM]
Ребят такая трабла, при чтении из бд не идет чтение по порядку, а это значит при сравнении возникают ошибки, я это смог поправить перестановкой объектов в методе таким образом
~assertMatch(service.getAll(User_1_ID), USER_RESTAURANT_1, USER_RESTAURANT_4, created,USER_RESTAURANT_2,  USER_RESTAURANT_3);~
может кто знает как настроить, чтоб неважно буыло какая идет последовательность


viges2201 [Yesterday at 3:00 PM]
просто хочется это сделать красиво без сортировки


2 replies
Ma3stro [20 hours ago]
Order by можешь делать при запросе с базы


viges2201 [12 hours ago]
спс


viges2201 [3:01 PM]
уже готовым методом


bazz [Oct 15th at 2:58 PM]
ребята а канал по работе/ собеседованиям есть?


5 replies
Grigory Kislin [4 days ago]
в группе слак javaops есть interview, job_feedback, vacancies (вступить можно из профиля javaops)


bazz [4 days ago]
в профиле ничего не увидел,может ссылку?


realcorwin [4 days ago]
https://javaops.slack.com/


bazz [3 days ago]
туда нужно иметь приглашение? меня не пускает


Victor [3 days ago]
с сайта topjava по-моему получить можно


bazz [11:36 AM]
ребята а группа по выпускному проекту где? @Grigory Kislin (edited)

Grigory Kislin [7:06 PM]
есть канал #graduation группы нет

bazz [9:08 AM]
@Grigory Kislin сдавал свой выпускной на проверку, когда будут результаты?

Grigory Kislin [4:56 PM]
всем привет! проверку начал сегодня, извините за опоздание... в порядке сдачи отписываюсь (edited)