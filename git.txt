Grigory Kislin [2:12 PM]
joined #git.

Grigory Kislin [2:12 PM]
set the channel purpose: вопросы по git

Grigory Kislin [2:12 PM]
set the channel topic: вопросы по git

Tanya [6:32 PM]
joined #git along with 18 others.


Andy Fleer [1:54 PM]
как удобно выкладывать на github дз? Положить в ветку HomeTask конкретный файл или смержить его с проектом?
В видюхе мерджить показано, а в описании задания делать ветку для дз
Ну и в принципе. Если в ветку дз, то кладу один файл (у меня все дела сделаны в одном файле) или весь проект заталкиваю?

Stanislav [2:01 PM]
@Andy Fleer http://urlid.ru/bd30
urlid.ru
Сервис коротких ссылок UrlId.ru
UrlId - сервис коротких ссылок с выводом QR кода. Сокращение длинных ссылок. Мы делаем длинные ссылки короткими. Запоминай ссылку по идентификатору. Бесплатно и навечно. Скрытие ссылок. Short link service

Andy Fleer [5:01 PM]
Сделал как в видюхе. Как собственно делать передачу дз? Скинуть адрес гитхаба?

vch [5:08 PM]
@Andy Fleer как в видюхе ты не мог сделать, т.к. везде говорится, что ветка master меняется только патчами от Григория. А все домашние задания делаются в отдельных ветках. А у тебя домашнее задание в master. Причём - скажу по секрету, с ошибкой.
А так да - скидываешь проверяющим http-ссылку на ветку с домашним заданием репозитория.

Andy Fleer [5:16 PM]
Дз с ошибкой?

vch [5:18 PM]
@Andy Fleer Увы... Но можешь отправить на проверку, главное с ветками разберись в git

Andy Fleer [5:18 PM]
ну вот над ветками и работаю
получается что после фока проекта к себе надо сделать ветку для дз
и потом заталкивать всё туда
так?

vch [5:19 PM]
@Andy Fleer Не совсем. Патч Григория "Prepare to HW0" - идёт в master. А затем ветку HW0 делаешь и там ДЗ делаешь. В статье же детально расписано.

Andy Fleer [5:26 PM]
Prepare to HW0 вот эту штуку подскажи как удалить теперь?

vch [5:28 PM]
@Andy Fleer О, это самое интересное. 2 варианта - изучать что такое force push и как перезаписывать коммиты. Удовольствие сомнительное, но многим приходится делать в середине курса при неудачных коммитах. И 2 вариант - удалить свой репозиторий и заново форкнуть его - что я на данном этапе и рекомендую.

Stanislav [5:30 PM]
Время еще есть, лучше поиграйся (удалить коммиты и т.д.) с этим репозиторием, а новый форкнуть, накатить патч и т.д. делов на 5 минут.

Andy Fleer [5:35 PM]
не вопрос удалил
Виталий подскажи. Ошибка которую видишь из вот этого списка  "Замечания к HW0" https://github.com/JavaOPs/topjava/ ?
GitHub
JavaOPs/topjava
topjava - Java Enterprise: Maven/ Spring/ Security/ JPA(Hibernate)/ REST(Jackson)/ Bootstrap(CSS)/ jQuery
Или ошибка по существу
?
Типа не правильно понял задание

vch [5:40 PM]
@Andy Fleer Неправильно понял задание.

Andy Fleer [5:40 PM]
Ок
спасибо


Alexander [12:03 PM]
кто-нибудь сталкивался с ограничениями корпоративного прокси сервера для соединения с github? В частности при попытке git clone.. получаю отказ в доступе. Попытка сделать git config с параметрами сервера тоже не проходит.

viges2201 [12:43 PM]
fork сделай

Alexander [1:56 PM]
причем здесь fork? git clone делаю для переноса со своего git account на локальный диск

Alexander [8:13 PM]
вопрос решился чз unset


Andrey [9:48 AM]
всем привет.у меня уже есть репозиторий топджава (раньше проходил). как правильно создать новый репозиторий для топджава14? При нажатии на fork меня просто перебрасывает на уже существующий проект. Может, создать локальную копию проекта, а потом настроить git в локальном проекте на свой проект(новый репозиторий топджава14) в GitHub?

Alexander Pilipenko [10:23 AM]
Нельзя сделать 2 и более форка, но можно сделать через git clone
https://www.google.by/amp/s/alexisylchan.wordpress.com/2012/06/05/how-i-to-create-a-second-fork-of-a-github-repo/amp/
Alexis Chan
How I created a second fork of a Github repo
Tried following the steps mentioned in http://alt.adrianshort.co.uk/blog/2011/11/08/create-multiple-forks-of-a-github-repo/ but it didn’t work for me for some reason. Documenting this for personal purposes.
Was working on a new machine, so had to:
Set up Git
git config –global user.name “Username”
git config –global user.email “youremail@yourdomain”
 Show more
Патчи должны работать

Andrey [10:35 AM]
спасибо, так и думал )


Vangelis Kondratevi [Today at 12:59 AM]
in #git
Хаюшки, может кто-нибудь подсказать, как редактировать самый первый коммит/старый коммит, после которого еще идут?
Я делаю через Interactive Rebase -> Edit [коммит] -> редактирую коммит -> Делаю коммит и пуш и потом продолжаю рибейз. Но на гитхабе пуш не виден. Может я что-то не слишком понимаю, но все проходит успешно и в логе гита виден данный коммит и видно разветвление с раннего коммита.


7 replies
Kiri [8 hours ago]
Логика гита в том, чтобы ничего после пуша редактировать было нельзя. В этом вся суть контроля версий. Если тебе надо что-то изменить - меняешь и пушишь изменения, если отменить изменения - см.revert после чего также делаешь новый коммит и пуш. Если запорол проект - сейчас самое время чтобы удалить и начать заново, пока сделано чуть. Побочные ветки удалять можно, но не главную. И 3 раза подумай перед commit и 4 раза - перед push. Коммит до пуша как-то можно было удалять, на сколько я помню.


Kiri [8 hours ago]
Скорее всего у тебя видно локальное разветвление, его нельзя просто так запушить, что бы там консоль не писала. Делаешь pull -> смотришь в коде на комменты гита если есть, исправляешь -> коммитишь и пушишь. Должно сработать, в реальной работе при коммитах нескольких человек в одну ветку так и происходит.


Vangelis Kondratevi [7 hours ago]
Смотри: то есть ты имеешь ввиду сделать пул того коммита, который я хочу редактировать. Но разве пул не перезапишет мои коммиты и самое главное, не смерджит ли он мои ветки мастер и HW?


Alexander Pilipenko [6 hours ago]
@Vangelis Kondratevi Не совсем, точнее совсем не понятно, что ты пытаешься сделать. Ты пытаешься таким образом откатить  изменения в каком-то файле? Если я не ошибаюсь, то нужно из старого кожимита сделать новую ветку. Внести в ней изменения, а потом смержить основную ветку и созданную для редактирования


Alexander Pilipenko [6 hours ago]
Rebase - скорее всего должен сделать что-то подобное. https://habr.com/post/161009/
Хабр
Git Rebase: руководство по использованию
Rebase — один из двух способов объединить изменения, сделанные в одной ветке, с другой веткой. Начинающие и даже опытные пользователи git иногда испытывают... (16 kB)


Alexander Pilipenko [6 hours ago]
Ну и еще есть такая статья


Alexander Pilipenko [6 hours ago]
https://habr.com/post/201922/
Хабр
Изменение коммитов в Git
Это пост для тех, кто начинает работу с Git. Все, что здесь написано по частям можно найти в многочисленных простынях о Git на Хабре. Но я подумал, что неплохо...


shomnest [Yesterday at 2:41 PM]
in #git
Вопрос по HW1, я правильно понял, что нужно применять патчи по очереди, комитя каждый отдельно, потм для того что бы запушить все изменения единовременно нужно сделать git reset soft?


12 replies
sky [1 day ago]
Все так, но запушить можно/нужно и без ресета


shtramak [1 day ago]
ну, накатывать можно одни за одним и не комитя сразу


Katherine [1 day ago]
Но лучше все-таки делать коммит после каждого патча - потом можно будет посмотреть изменения, внесенные каждым патчем.


shomnest [1 day ago]
@sky зачем тогда Григорий в видео говорит о том, что необходимо сделать soft reset что бы весь чейндж ушел одним пушем?
@shtramak я так понимаю что комит после накатки каждого патча, это для удобства отслеживания изменений после каждой накатки и возможность откатиться до состояния комита


Katherine [1 day ago]
> что необходимо сделать soft reset
Это на случай, когда ты делаешь ДЗ, коммитишься, потом еще что-то долелываешь, что по логике должно было бы войти в один коммит с предыдущим.


shomnest [1 day ago]
@Katherine я правильно понимаю что описание soft reset - это просто описание доп. функционала гита и можно локально накопить комитов, а потом стандартно, все разом, что есть в локальном репозитории, запушить на удаленный? (edited)


tema.emelyan [1 day ago]
чтобы добавить что-то в предыдущий коммит, если ещё не запушили, то можно сделать git commit --amend --no-edit


shomnest [1 day ago]
@Katherine ок, я понял, спасибо.


shomnest [1 day ago]
@tema.emelyan https://topjava14.slack.com/archives/CAHDHAP7W/p1530273672000360?thread_ts=1530272462.000004&cid=CAHDHAP7W
Так?
ivan
@Katherine я правильно понимаю что описание soft reset - это просто описание доп. функционала гита и можно локально накопить комитов, а потом стандартно, все разом, что есть в локальном репозитории, запушить на удаленный?
From a thread in #gitYesterday at 3:01 PM


tema.emelyan [1 day ago]
не понимаю что ты имеешь ввиду. резет это резет, коммит это коммит, пуш это пуш, это всё функционал гита


tema.emelyan [1 day ago]
поиграй с этим, посмотри как оно работает


shomnest [1 day ago]
@tema.emelyan блин, да я понимаю что это все функционал гита)) я о том, что запушить все комиты разом, на удаленный репозиторий, можно и без софт ресет, в целом @Katherine ответила на мой вопрос, я уже понял


tema.emelyan [3:06 PM]
uploaded this image: Screenshot_20180629_220521.png 


tema.emelyan [3:07 PM]
то же самое можно сделать из коммит окна идеи если выбрать опцию amend commit вверху справа (edited)
если запушили уже, то всё равно можно сделать тоже самое, тогда просто будет разветвление, нужно будет пушить с опцией --force в след раз (edited)
если сами проект ведёте, то ничего страшного, когда работать с кем-то начнёте так лучше не делать

Baravader [4:55 PM]
uploaded and commented on this image: image.png 

Подскажите пожалуйста,как откатиться вообще на начало что бы заново аккуратно всё выполнить?
shtramak [5:06 PM]
что б вообще - это "hard reset"... ПК по коммиту на который хочешь откатиться и reset сurrent branch to here и выбирай тип хард... тогда все откатится до исходной точки с удалением кода и всех коммитов которые были сделаны до этого момента
shtramak [5:07 PM]
в любом случае во время экспериментов с гитом советую делать резервную копию папки проекта
tema.emelyan [5:33 PM]
коммиты наверное не удалятся, чтобы народ не вводился в заблуждение. ты так пишешь как будто если сделал резет хард, то всё конец. Просто положение локального репозитория (HEAD) становится на выбранный коммит и все изменения откатываются. Коммиты вроде бы не удаляются
tema.emelyan [5:34 PM]
но в целом да, чтобы начать заново, резет хард

Baravader [5:34 PM]
Да,я уже битых 2 часа пытаюсь это сделать))А как сделать ресет хард?

tema.emelyan [5:36 PM]
иди в терминал, пиши git log
должно что-то вроде такого
commit eaf3964b32e9f65b59cca185d5cb5b1e1ea64a3d
Author: Artyom Emelyanenko <tema.emelyan@gmail.com>
Date:   Thu Jun 28 19:15:27 2018 +1000

   1 1 HW0 stream

commit 74324ceb3249e9a603981942b129f9b2ff85149e
Author: Artyom Emelyanenko <tema.emelyan@gmail.com>
Date:   Thu Jun 28 19:15:15 2018 +1000

   1 0 fix

commit 4f1578644b2aa9c65b3dd847da40455c57d3cf07
Author: Artyom Emelyanenko <tema.emelyan@gmail.com>
Date:   Thu Jun 28 19:14:10 2018 +1000

   Prepare to HW0

Baravader [5:37 PM]
uploaded this image: image.png 


tema.emelyan [5:38 PM]
ну так ты уже где нужно
поздравляю
ты же сюда и хотел попасть?
напиши ка ещё git status

Baravader [5:39 PM]
Это я папку затёр на гите из репа удалился,только что жинь не закончил

tema.emelyan [5:39 PM]
ну смотри у каждого коммита есть hash
это вроде его id

shtramak [5:40 PM]
да, по факту у гита ничего бесследно не исчезает, но если уж делаешь хард ресет, то это должне быть осмысленный поступок) а так по ходу можно восстановить то что было захардрисечено - https://goo.gl/SMYDxp, но если честно то ни разу не пользовался данной возможностью... (edited)
@tema.emelyan commented on @Baravader’s file image.png: коммиты наверное не удалятся, чтобы народ не вводился в заблуждение. ты так пишешь как будто если сделал резет хард, то всё конец. Просто положение локального репозитория (HEAD) становится на выбранный коммит и все изменения откатываются. Коммиты вроде бы не удаляются
Posted in #gitYesterday at 5:33 PM

tema.emelyan [5:40 PM]
ты хочешь куда-то попасть ты пишешь git reset --hard hash
вместо hash ставишь нужный hash

Baravader [5:41 PM]
On branch master
Your branch is up to date with 'origin/master'.

Untracked files:
 (use "git add <file>..." to include in what will be committed)

       dblhavbsdk
       patches/

nothing added to commit but untracked files present (use "git add" to track)

tema.emelyan [5:41 PM]
можно это всё делать в гуи идеи

Baravader [5:42 PM]
Я честноговоря ваще тут как свинья в апельсинах,ничо не понимаю как с гитом работать

tema.emelyan [5:42 PM]
жмёшь правой клавишей на нужном коммите и вон тебе написали сверху что дальше

Baravader [5:42 PM]
всё вроде по инструкции делаю,а ответвлений нет в логе

tema.emelyan [5:43 PM]
в идее вкладка version control
посмотри туториалов на ютубе

shtramak [5:43 PM]
а ты перегружал идею? она вполне может заглючить на таких моментах...

Baravader [5:43 PM]
и перезагружал
если откат делать то как бэ комиты сами остаются а локальные изменения откатывются

shtramak [5:44 PM]
что ты имеешь в виду под "нет ответвлений в логе"?
Baravader
всё вроде по инструкции делаю,а ответвлений нет в логе
Posted in #gitYesterday at 5:42 PM

tema.emelyan [5:44 PM]
ну это потому что ты запушил уже наверное

Baravader [5:44 PM]
uploaded this image: image.png 

shtramak [5:45 PM]
а ты не к этому стремился?

tema.emelyan [5:45 PM]
ответвлений нет, потому что только одна ветка :slightly_smiling_face:

Baravader [5:46 PM]
uploaded and commented on this image: image.png 

Ну вот в туториале есть маленькие


Baravader [Yesterday at 5:46 PM]
in #git
Она же должна появляться когда ты что то комитишь\пушишь из ветки HW0 например?


3 replies
shtramak [1 day ago]
а ветка HW0 у тебя есть?


Baravader [1 day ago]
Доооо,2 всего мастер и хв


shtramak [1 day ago]
попробуй что-либо закомитить в HW0 и посмотри на ответвления


tema.emelyan [5:47 PM]
у него ответвления потому что ветка от которой он ответвился продолжается дальше
ты если теперь вернёшься в мастер и накатишь патчи у тебя тоже ответвится
потому что развилка появится

Baravader [5:48 PM]
сек)

tema.emelyan [5:48 PM]
сейчас развилки нету

Baravader [5:50 PM]
uploaded this image: image.png 


Baravader [5:51 PM]
uploaded this image: image.png 


tema.emelyan [5:52 PM]
ты зачем хв1 создал :smiley:

Baravader [5:52 PM]
Ну тип следующее задание

tema.emelyan [5:53 PM]
становись в мастер на prepare to hw 0
и накатывай патчи от сенсея

Baravader [5:53 PM]
и откатывать?

tema.emelyan [5:53 PM]
как накатишь патчи делай ветку хв1 и делай там хв1 (edited)

Baravader [5:56 PM]
спс

Mihail Kedel [2:17 PM]
uploaded this image: не могу накатить патч 1_3_HW0_optional2 , после нажатия apply файл MealsUtil не меняется 


tema.emelyan [2:26 PM]
@Mihail Kedel а предыдущие патчи накатил?

tema.emelyan [2:29 PM]
uploaded this image: Screenshot_20180630_212855.png 


tema.emelyan [2:29 PM]
я тоже так могу :slightly_smiling_face:
@Mihail Kedel нужно hw0 накатывать все, а не какой-то один из них. плюс у тебя туду одно куда-то исчезло. нужно применять все патчи и соблюдать последовательность (edited)

Grigory Kislin [10:28 PM]
@Mihail Kedel
1. https://github.com/JavaOPs/topjava/wiki/Git#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D0%BF%D0%B0%D1%82%D1%87%D0%B0%D0%BC%D0%B8-%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B5
2. https://github.com/JavaOPs/topjava/wiki/Git#patch-%D0%BD%D0%B5-%D0%BD%D0%B0%D0%BA%D0%B0%D1%82%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F-%D0%BF%D1%80%D0%B5%D0%B4%D0%BB%D0%B0%D0%B3%D0%B0%D0%B5%D1%82-merge (edited)


Mihail Kedel [12:37 PM]
Спасибо,я пачти не по порядку накатывал


Gagarina6794 [5:35 PM]
Привет! У меня проблема)) сделала первую часть задания в ветке HW02 в идее, потом вернулась в ветку master, закомитила просто патчи примененные из урока и запушила их, в итоге у меня ветка master стала как HW02 , а HW02 вообще стала как HW0. Такое лечится? А то пропала часть сделанных классов, обидно... надо сначала переделывать

tema.emelyan [5:49 PM]
Наверняка можно восстановить
Напиши в консоли git reflog и скинь результат

Gagarina6794 [5:54 PM]
fatal: не є сховищем git repository (або будь-яким батьком аж до точки монтування /)
Зупинка на межі файлової системи (GIT_DISCOVERY_ACROSS_FILESYSTEM не задане).
пару классов пропало, постараюсь сделать наново)
А вот что с мастер веткой делать, вот в чем вопрос

Gagarina6794 [6:09 PM]
восстановила работу непосильную (вроде), ну все работает, мастер надо будет с начала делать

Yevhen Maksymovych [9:41 PM]
тут же есть "каноничный" проект в ветке project_change
всегда можно свой мастер превратить в его мастер :slightly_smiling_face:
делаем раз - добавляем в список ремоутов репозиторий Григория
делаем два - смотрим на git diff своего репозитория и "каноничного"
делаем три - правим руками то, что нам показал гит (или делаем патч, и накатываем его)
что-то типа такого:
```git remote add -f b https://github.com/JavaWebinar/topjava.git
git remote update
git diff master remotes/b/master > canonical.patch
git remote rm b```
главное убедиться, что в репозитории topjava.git версия с установленными патчами. иногда она малость запаздывает


Alexey_P [Jul 9th at 6:11 PM]
in #git
У меня почему-то не накатывается 2_5_dependency_injection.patch. Пишет Can't apply 3 hunks. У кого-то было такое? Кто-нибудь знает в чем может быть дело?


6 replies
Victor [1 day ago]
откати все, накоти заново, может поможет.


Alexey_P [1 day ago]
я закоммитил все до этого уже. Буду думать короче


Victor [1 day ago]
так коммиты можно откатить

Victor [1 day ago]
через идею это легко


Victor [1 day ago]
григорий все объяснял, посмотри вводное занятие


Johann [1 day ago]
у меня так было, правда с 2_1 и 2_2, тоже писала  сan't apply n of m hunks, оказалось, неправильно накатил предыдущие патчи из первого урока, проблема была с одним классом - MealUtil. Откатил мастер назад, накатил патчи по новой, все стало как нужно


Mihail Kedel [5:02 PM]
uploaded this image: у меня одного не накатывается 3_07_add_junit.patch? 


Yevhen Maksymovych [5:02 PM]
папку "test" создал?

Mihail Kedel [5:03 PM]
да,и все пачти по очереди накатывал в ветку master
всё,починил,заглянув в репозиторий Григория.С пустыми линиями почему-то проблема была


Prodigy [Jul 15th at 2:40 PM]
in #git
Может кто знает: сделал первый коммит, потом еще делал коммиты, теперь перед пушем в гитхаб понял, что случайно закомитил файлик с настройками базы данных с паролями в первый коммит, как можно отменить первый коммит и оставить изменения все которые были сделаны? Софтовый ресет откатывает только ДО первого коммита, что с первым коммитом делать непонятно.


15 replies
Victor [1 day ago]
похоже тебе ветку нужно удалить полностью, как я понял.


Prodigy [1 day ago]
как удалить полностью? это очень важный проект который крутится в продакшине, потеря изменений всех чревато проблемами(


vch [1 day ago]
Так если push ещё не было, то можно же просто ещё 1 commit сделать в котором удалить этот файл? После этого push отправит в удаленный репозиторий конечное состояние, без промежуточных коммитов. Или я чего-то не понимаю?


Victor [1 day ago]
тогда, сделай коомит без файла, добавь в gitignore и возможно нужно будет индекс его из git удалить.


Prodigy [1 day ago]
нет проблем добавить еще один коммит и удалить в нем файл, но я боюсь что все коммиты которые я делал так же улетят в гитхаб, по логике так и должно быть


Prodigy [1 day ago]
по поводу удаления индекса непонятно как... и можно ли удалить что-то из существующего коммита


Prodigy [1 day ago]
чтобы из индекса удалить, должен быть отменен коммит, а как первый коммит отменить вообще непонятно


Victor [1 day ago]
думаю, первый коммит возможно удалить через git bash. Удачи в поисках :slightly_smiling_face:


Prodigy [1 day ago]
Спасибо, уже разобрался.... кому интересно, вот такая команда помогла: 
git update-ref -d HEAD


Grigory Kislin [20 hours ago]
@Prodigy вопрос для меня интересный, тк другого способа кроме откатить все и заново накатить не знаю.
а можно поподробнее чем update-ref  тут поможет?
может ссылка какая.. или инструкция (edited)


Prodigy [19 hours ago]
@Grigory Kislin нашел это решение на стековерфлоу, вот ссылочка 
https://stackoverflow.com/questions/10911317/how-to-remove-the-first-commit-in-git
Stack Overflow
How to remove the first commit in git?
I am curious about how to remove the first commit in git. What is the revision before committing any thing? Does this revision have a name or tag?
 


Grigory Kislin [19 hours ago]
@Prodigy спасибо. а как сам коммит удалить? или `git rebase -i --root` смержит их все в один? (edited)


Prodigy [15 hours ago]
@Grigory Kislin эта команда 'git update-ref -d HEAD' как раз и отменяет все коммиты... мне это и нужно было... но как-то хитро от сделал отмену, лог коммитов очистился полностью, но после вновь сделаного "первого коммита", он показал всю цепочку предыдущих коммитов, и новый "первый коммит" был добавлен еще одним коммитом, но без связи с предыдущими.... В итоге на гитхаб улетел мой последний первый коммит.


Grigory Kislin [14 hours ago]
ну, а чем это лучше чем hard reset? твоя цепочка осталась висеть невостребованной?


Prodigy [4 hours ago]
вероятно hard reset отменил бы все изменения, что неприемлемо... старая цепочка осталась висеть, с ней уже ничего нельзя сделать... в моей ситуации это не критично
